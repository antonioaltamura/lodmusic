############## Info artist ##############

PREFIX umbelrc: <http://umbel.org/umbel/rc/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX dbo: <http://dbpedia.org/ontology/>

SELECT DISTINCT ?name ?bDate ?abstract ?image ?relatedArtist ?relatedBand ?origin ?caption
WHERE
{
	$param a umbelrc:MusicalPerformer;
    foaf:name ?name;
	dbo:abstract ?abstract;
	dbo:birthDate ?bDate.
 OPTIONAL{$param dbo:thumbnail ?image}.
 OPTIONAL{?artist dbo:associatedBand ?bandRelated} .
 OPTIONAL{?artist dbo:associatedMusicalArtist ?artistRelated} .
 OPTIONAL{ ?artist dbp:caption ?caption} .
 OPTIONAL{?artist dbp:origin ?origin} .

}


############## Info Artist +  Band (JOIN)##############

PREFIX umbelrc: <http://umbel.org/umbel/rc/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX dbo: <http://dbpedia.org/ontology/>
PREFIX dbp: <http://dbpedia.org/property/>

SELECT DISTINCT ?name ?bDate ?abstract ?image ?band ?relatedArtist ?relatedBand ?origin ?caption
WHERE
{
	$param a umbelrc:MusicalPerformer;
  foaf:name ?name;
	dbo:abstract ?abstract;
	dbo:birthDate ?bDate.
  ?band dbp:currentMembers ?artist.
  OPTIONAL{?artist dbo:associatedBand ?bandRelated} .
  OPTIONAL{?artist dbo:associatedMusicalArtist ?artistRelated} .
  OPTIONAL{ ?artist dbp:caption ?caption} .
  OPTIONAL{?artist dbp:origin ?origin} .
  OPTIONAL{$param dbo:thumbnail ?image}.

}


############## Band di un artista ##############


PREFIX dbo: <http://dbpedia.org/ontology/>
PREFIX dbr: <http://dbpedia.org/resource/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX dbp: <http://dbpedia.org/property/>
SELECT ?band
WHERE{
?band a dbo:Band;
             dbp:currentMembers $param.

}

############## Info Band ##############

PREFIX dbo: <http://dbpedia.org/ontology/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX dbp: <http://dbpedia.org/property/>

SELECT  ?website ?abstract ?genre ?image ?member ?artistRelated ?bandRelated ?origin ?caption
WHERE{
$param a dbo:Band ;
       foaf:name ?name;
      dbo:abstract ?abstract ;
      dbp:currentMembers ?member .
  OPTIONAL{$param dbo:genre ?genre } .
  OPTIONAL{$param dbp:website ?website} .
  OPTIONAL{$param dbo:associatedBand ?bandRelated} .
  OPTIONAL{$param dbo:associatedMusicalArtist ?artistRelated} .
  OPTIONAL{ $param dbp:caption ?caption} .
  OPTIONAL{$param dbp:origin ?origin} .
  OPTIONAL{$param dbo:image ?image} .

}

############## Info Album ##############

PREFIX dbo: <http://dbpedia.org/ontology/>
PREFIX schema: <http://schema.org/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>

SELECT DISTINCT ?name ?abstract ?recordLabel ?releaseDate ?genre ?artist
WHERE{
$param a schema:MusicAlbum;
			foaf:name ?name;
			dbo:abstract ?abstract;
			dbo:recordLabel ?recordLabel;
			dbo:releaseDate ?date;
  			dbo:artist ?band.
  OPTIONAL{?album dbo:genre ?genre}.

			
}



############## Autocompletamento ricerca globale ($param) ##############

PREFIX umbelrc: <http://umbel.org/umbel/rc/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX dbo: <http://dbpedia.org/ontology/>
PREFIX dbp: <http://dbpedia.org/property/>

SELECT DISTINCT ?entity ?name 
WHERE
{  
  ?entity foaf:name ?name.
  FILTER regex(?name, "^$param"). 
}


##############Info Track ##############


PREFIX umbelrc: <http://umbel.org/umbel/rc/>
PREFIX dbo: <http://dbpedia.org/ontology/>
PREFIX foaf: <http://xmlns.com/foaf/0.1/>
PREFIX dbp: <http://dbpedia.org/property/>

SELECT DISTINCT ?name ?abstract ?releaseDate ?artist ?album ?recordLabel
     WHERE
{
  
  {$param a umbelrc:MusicSingle} UNION {$param a dbo:MusicalWork}.

  $param  foaf:name ?name;
      dbo:abstract ?abstract;
      dbo:releaseDate ?date;
  { $param dbo:musicalArtist [ a umbelrc:MusicalPerformer;
                                foaf:name ?artist;]}
  UNION  {$param dbo:musicalArtist [ a dbo:Band;
  foaf:name ?artist;]}      
  FILTER(lang(?abstract) = "en").
      OPTIONAL{?track dbo:album ?album}.
      OPTIONAL{?track dbo:recordLabel ?recordLabel}.

}    
